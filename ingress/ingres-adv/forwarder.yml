apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  name: forwarder
  namespace: acceptatie
  annotations:
    # Ingress controller for service external traffic
    kubernetes.io/ingress.class: " "

    # IP whitelisting
    nginx.ingress.kubernetes.io/whitelist-source-range: 10.234.0.0/16,192.168.0.0/16,87.213.32.38
    nginx.ingress.kubernetes.io/upstream-vhost: "berichten-legacy.dci.aah.acc"
    nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
    nginx.ingress.kubernetes.io/rewrite-target: /$2
spec:
  tls:
  - hosts:
    - forewarder.acc
    secretName: forwarder-ssl
  rules:
  - host: forwarder.acc
    http:
      paths:
      - path: /echo
        backend:
          serviceName: ssldemo-svc
          servicePort: http-ssldemo
      - path: /berichten.legacy(/|$)(.*)
        backend:
          serviceName: fwd-berichtenlegacy-svc
          servicePort: 443
---
apiVersion: v1
kind: Secret
metadata:
  name: forwarder-ssl
  namespace: acceptatie
type: kubernetes.io/tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlHYVRDQ0JWR2dBd0lCQWdJVEpnQUFCM0xqNVE5VmtNMyt6QUFCQUFBSGNqQU5CZ2txaGtpRzl3MEJBUTBGDQpBREEzTVJJd0VBWUtDWkltaVpQeUxHUUJHUllDVDFReEZEQVNCZ29Ka2lhSmsvSXNaQUVaRmdSQlFVaEhNUXN3DQpDUVlEVlFRREV3SkRRVEFlRncweE9EQXpNamd3T1RFek5EZGFGdzB5TURBek1qY3dPVEV6TkRkYU1JR01NUXN3DQpDUVlEVlFRR0V3Sk9UREVRTUE0R0ExVUVDQk1IVlhSeVpXTm9kREVUTUJFR0ExVUVCeE1LUVcxbGNuTm1iMjl5DQpkREV0TUNzR0ExVUVDaE1rU1c1bWNtRnpkSEoxWTNSMWNtVWdRMlZ5ZEdsbWFXTmhkR1VnUjJWdVpYSmhkRzl5DQpNUTh3RFFZRFZRUUxFd1pKUTFRZ1UwWXhGakFVQmdOVkJBTU1EU291WkdWMkxtRmhhR2N1YjNRd2dnSWlNQTBHDQpDU3FHU0liM0RRRUJBUVVBQTRJQ0R3QXdnZ0lLQW9JQ0FRQyszam55UW9xLzZPVEZwVFRXYzlrbTR4YVpkRjRNDQpMcXIwZ0ozVnM5MWFRTDdWbXBZWVZ3eDh2eTNORDJGNEJHS3JZOUE2OFNTQ051Y3ozcldqMDZ5dzdEWUxDTTRlDQpxV0hZcndHcFhvUzMwR0d0UXdVREl6aktleFE0ektOUVo3SmV1WEkzejlkTVI1L0Jpdm1lTk9nUmh2MXZXM2JpDQprSTJyb3NkNkpXd2hQdUtSRUZiQmYvRWZzdC9ySHJBejMzWnY3eUtZTzhVNHNWeC9WN2Y2SGVXWG1hcnR5RmRTDQpiTDdMSCtqUjRMaU5wMTdtSmUxOUJlSEFtUE5IMUFYWGJhRm9ZejNnTTI3YkU5MXBreDR6eXlBcVZTc0g4Y2RJDQpxeDFJcEhNenF0QUlmT1dYS0NucGNDOGppRlpxT2hVVE1uYzA0Z013S3hLb2ZIdnhFdGtjUWNxOFBaaUl5cGhBDQpPS3ZNYWkrSjQrWG5EY3dya2RaRzZoTnBNeWx3TGNxUFE4aStQTXNBVVBreVRpWitVTzFXMkplM09CR3JodEFSDQpWZ3BvVXQ3YWU4bm1qY3Y4d3FZaHpVRm9FanVJVXBaMUZlOVZOOEFhNG5BR1RqNlNnQThKV1djeENLbnBlRTJIDQphOXdCQWdSa29CZWNMOER3ckhjNTlleU1aQjgvOThjdFNCOFl2aWxHWWRLK1BrMzBNMkdkbWxpZ3RhMlo4VE00DQpiYS9qbHQrclZMMHFVbFlxdEpxMS90YWwzdEFBV056ZGxlbFFLMlNpZERjSm1rcFNScWRCUE5tSnhRdWdmK1pBDQpXQnVLSFd6azNTTTdRUWlWeSt3eldPNDdkV2hobkl5STkrbnRTMVp6SXp0djI5aVFGRGppTUVmZzl1M2NyeVNyDQo1bnErVTZWaUZ2QWRFUUlEQVFBQm80SUNGakNDQWhJd0RnWURWUjBQQVFIL0JBUURBZ1dnTUJNR0ExVWRKUVFNDQpNQW9HQ0NzR0FRVUZCd01CTUJnR0ExVWRFUVFSTUErQ0RTb3VaR1YyTG1GaGFHY3ViM1F3SFFZRFZSME9CQllFDQpGSE8rczR0akpkZ2FLOUxYVStQZWxFTG5jbWNrTUI4R0ExVWRJd1FZTUJhQUZIV2JaOVhrYzFBUTVNQ0Z6V3RFDQpTUFBocWpLNE1JRzZCZ05WSFI4RWdiSXdnYTh3Z2F5Z2dhbWdnYWFHZ2FOc1pHRndPaTh2TDBOT1BVTkJLREVwDQpMRU5PUFVOQkxFTk9QVU5FVUN4RFRqMVFkV0pzYVdNbE1qQkxaWGtsTWpCVFpYSjJhV05sY3l4RFRqMVRaWEoyDQphV05sY3l4RFRqMURiMjVtYVdkMWNtRjBhVzl1TEVSRFBVRkJTRWNzUkVNOVQxUS9ZMlZ5ZEdsbWFXTmhkR1ZTDQpaWFp2WTJGMGFXOXVUR2x6ZEQ5aVlYTmxQMjlpYW1WamRFTnNZWE56UFdOU1RFUnBjM1J5YVdKMWRHbHZibEJ2DQphVzUwTUlHd0JnZ3JCZ0VGQlFjQkFRU0JvekNCb0RDQm5RWUlLd1lCQlFVSE1BS0dnWkJzWkdGd09pOHZMME5PDQpQVU5CTEVOT1BVRkpRU3hEVGoxUWRXSnNhV01sTWpCTFpYa2xNakJUWlhKMmFXTmxjeXhEVGoxVFpYSjJhV05sDQpjeXhEVGoxRGIyNW1hV2QxY21GMGFXOXVMRVJEUFVGQlNFY3NSRU05VDFRL1kwRkRaWEowYVdacFkyRjBaVDlpDQpZWE5sUDI5aWFtVmpkRU5zWVhOelBXTmxjblJwWm1sallYUnBiMjVCZFhSb2IzSnBkSGt3SVFZSkt3WUJCQUdDDQpOeFFDQkJRZUVnQlhBR1VBWWdCVEFHVUFjZ0IyQUdVQWNqQU5CZ2txaGtpRzl3MEJBUTBGQUFPQ0FRRUFFY201DQpMalloSXR3UGYrNExmVTVlbi9wV2dSamEwZFVhbFg0Y0Nla2FnMEdXQnpvVE04Kzd6OG9NL3JZeE8xL1BYVitrDQpOV1htRmErS2ppcDlSNTI4K0xScmthcmt3Yzg4OHZZWW9uUDBaK1BpYWtxMEtrV0kwNU5XL2lBdEZxVFh0YXNhDQpRcTN4NnlJYkRlZkIrbFc1Y3UvKzRoL0ovUkE4TC84ck1hdmRnVlBMUWRBQ3FEZVVvTUZvR2EzRUVIbHB5UFYzDQpVekJCczZYWmRaaEY5K1JHNGVEWWJCTGN2b3FqR3ArNEtGNHJ1cmVMT0h3eUsvSkdKTkhZMUdXZkVpcUFXVmJJDQpSTU9oQUsxdSs3bW9zZUJ2Mzdid2RqcVJQdEhSSE9qLzBxNVRZRlZld2FhZUNHNXRXVE0xL1VBQmUxQ1ZUclNSDQp0ZitwNDVKRGQrWFRjejkxWEE9PQ0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlEY0RDQ0FsaWdBd0lCQWdJUVMwMzh2UVdtdGFGT2pjVHo5T0hlRERBTkJna3Foa2lHOXcwQkFRMEZBREEzDQpNUkl3RUFZS0NaSW1pWlB5TEdRQkdSWUNUMVF4RkRBU0Jnb0praWFKay9Jc1pBRVpGZ1JCUVVoSE1Rc3dDUVlEDQpWUVFERXdKRFFUQWVGdzB4TnpBNE1EUXdPRE16TlROYUZ3MHlNakE0TURRd09EUXpOVEphTURjeEVqQVFCZ29KDQpraWFKay9Jc1pBRVpGZ0pQVkRFVU1CSUdDZ21TSm9tVDhpeGtBUmtXQkVGQlNFY3hDekFKQmdOVkJBTVRBa05CDQpNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQTNOMkpHREZOVDY4cllsMGc5bXZJDQpCL1lNZWs5VGJrK2Uxc1RkOCtYVTkvSld5M1VpaDZKUzE4YVRBM1VaSVZvQkVSZkhKN0FRb2VyRHdnRGZadlJHDQpLZFp1bTFVM3FodVJwSElQK0RGVENzUUd1eEZrdnROamRQNWNCWjV4VnZsZ0pZM0RqTHBxMUhHeFArUmdIVmw1DQpKWDU4cjIwRFJiZjk1UFJoRS9ZbTFBdUFIbnpla3ZBdEYxa3lpb29zYlY3ZXdWQjhIUEMwK1VoYXFtVVp5LzhnDQpXRHErQllMZU5KTlBwWUJWMXZKa3k5UGtTUTBHVFliRlc5UXlaeWdpQ1BpUDRiWXBRTEMxSWZJenY0QmozaDVwDQpMRjNIc1lYZ2N3NGRRV0h5c1RXOXp4dVh1OEVzb2M2eXMxU1FWdlRtNU1VNVgxMVNUNE01RUlkZ2t3VnY0eUR6DQpaUUlEQVFBQm8zZ3dkakFMQmdOVkhROEVCQU1DQVlZd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFDQpGZ1FVZFp0bjFlUnpVQkRrd0lYTmEwUkk4K0dxTXJnd0VnWUpLd1lCQkFHQ054VUJCQVVDQXdFQUFUQWpCZ2tyDQpCZ0VFQVlJM0ZRSUVGZ1FVVzBQdFBmT0p4MDA2ZmZaYmFNOEJWbkxaS000d0RRWUpLb1pJaHZjTkFRRU5CUUFEDQpnZ0VCQUdTWnZJamxwMjJTZ0tUL2dVdEpBK00wZGpnak1rbnVocXBYN3pDUnBGQThIUHI4ZnkrWW1VcWhkNXdkDQpBUFFKeFdVUHZacDkrSmlKYisrekVsS2NyUUFlNGJ5MStCbkgyS0hYRW9kNDM5NWZLVkk3QlZIK1ZmRFVTeGgwDQp2YzNIVXlYVndGMHdXVWZJWmsyOW1DWW00N2lsZXhoOU1RYldweW9wUVJ4YWw2a2hlSkk1dUVoWFJCbmtYZVk0DQpQY3ZpTERRUEZDS1Q3TVNHOTlQalJMMlVvRHRCWVIwQWh3cC9mTVBWbXlFaHpvNTI3dHdzb09NNWZQKy9NUm9tDQora2pIMmxZenpTTmdBYXZmUXJjK1Q1K2NpaUV3VWU0VXF6N2hWak9rcDFiUDE1SmtFMnM5d2lnb3B1VVBrR1IwDQp5V2lOK2ZOQURHWWliVHJiUW41OXFBZmRSLzQ9DQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tDQoNCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS1FJQkFBS0NBZ0VBdnQ0NThrS0t2K2preGFVMDFuUFpKdU1XbVhSZURDNnE5SUNkMWJQZFdrQysxWnFXCkdGY01mTDh0elE5aGVBUmlxMlBRT3ZFa2dqYm5NOTYxbzlPc3NPdzJDd2pPSHFsaDJLOEJxVjZFdDlCaHJVTUYKQXlNNHluc1VPTXlqVUdleVhybHlOOC9YVEVlZndZcjVualRvRVliOWIxdDI0cENOcTZMSGVpVnNJVDdpa1JCVwp3WC94SDdMZjZ4NndNOTkyYis4aW1EdkZPTEZjZjFlMytoM2xsNW1xN2NoWFVteSt5eC9vMGVDNGphZGU1aVh0CmZRWGh3Smp6UjlRRjEyMmhhR005NEROdTJ4UGRhWk1lTThzZ0tsVXJCL0hIU0tzZFNLUnpNNnJRQ0h6bGx5Z3AKNlhBdkk0aFdham9WRXpKM05PSURNQ3NTcUh4NzhSTFpIRUhLdkQyWWlNcVlRRGlyekdvdmllUGw1dzNNSzVIVwpSdW9UYVRNcGNDM0tqMFBJdmp6TEFGRDVNazRtZmxEdFZ0aVh0emdScTRiUUVWWUthRkxlMm52SjVvM0wvTUttCkljMUJhQkk3aUZLV2RSWHZWVGZBR3VKd0JrNCtrb0FQQ1Zsbk1RaXA2WGhOaDJ2Y0FRSUVaS0FYbkMvQThLeDMKT2ZYc2pHUWZQL2ZITFVnZkdMNHBSbUhTdmo1TjlETmhuWnBZb0xXdG1mRXpPRzJ2NDViZnExUzlLbEpXS3JTYQp0ZjdXcGQ3UUFGamMzWlhwVUN0a29uUTNDWnBLVWthblFUelppY1VMb0gvbVFGZ2JpaDFzNU4wak8wRUlsY3ZzCk0xanVPM1ZvWVp5TWlQZnA3VXRXY3lNN2I5dllrQlE0NGpCSDRQYnQzSzhrcStaNnZsT2xZaGJ3SFJFQ0F3RUEKQVFLQ0FnRUFybnhwYk5iNEVNalBtditVZGhnaUJETEZqak9iWm5lalFUSHpHRkg5b1d4ZkNOYnhMLzhrSTBhQwprRnZuTnRpTGV6TWNRVVlCb2lpZTVBUk0rUitoVjN3WlM2MFpBVjdIWEZkZ3BYMEt4eDl3cS93QXNRV1ovVURYCkU3Vy85dGxWYnRNSlg0eFp2aG9jS2NycXQzNldTSytuTUEzbGVPbTlHWk1OMk5RdExaZFhlRlgvZVpXRTBQMnQKUmp3ZnlNd1ljZXVqTEpnM2k4UllVdkhWOW9rdVFwRHdlY0FVVS8ybHpmdTEwMmdrVHhzYTNqcitDTFUvMDluLwpUVUsrdEZvOG5EbGRiNENWYnlHUjM5bm1XbUx2WE1QUE9zd0U2cUhEZTQwYTQ3amJ4V2FvWEs4UzRaejArdjdBClFRd29DQXl5ZlYzQW5HQkVCbE1HMnpQbjFyVXVwNkZ5RW1xUDJ0NHFZYjlEb1J2elZTUEFHbzJ5NVovYjI1TlQKaFQ1TmJxZUJmZWcyaHE2SDRicVBRTEo4UkpsNzU4MVlnRndWenJHNWgrU1NJd1BGWUxLak1OakthdzFqMXlVZQp5UFpDdHJ6empBYVhwb1EyUWMvaUZYVnJXMXdSR3Z2Zzh3TE1kbktLR0wwYVB6eFdZOFZlYlpWNkdhb1dPcDY0CjNEb1RmaGFveHMwY1VHU0paMis1dTdvUVJqbVVaRVp2WDBFZWFuRnMrYk03M1JEMkZSSDBzR1I1SkdXWUZONloKWVpYREQ0cElVVmNBT3dEZGdYK1VYVnVoTWhWRkJTTU5OZFVRTFJHVXNkNzBLOC9uaitEUGxVdG1CRUlCRVhqUAphYVUwZjdZNDAwd2Z3SVVLZDhwNFlUZHNRZC9xTnBEOGVwSjR0dFdFdmkyUnQwRkVLNEVDZ2dFQkFQTzI3NG4zCjh1UHF6Q2swVnZWc2FFU1NrMnYySXJSY0RHaXJsUG9wZGw1TkRtemNjTGt3NXh3YlRoV096LzdtS3NmWE5CcFoKZGdoc3g4WUQ2aEc5aGJEN2xBazIwNWVNSlZENGdRRXZKRVV4cVcwc1B0UWx4TDNHbVVnWTQyT3RKZ1AvWVRYdApVOXNMaktDZ211NnZHUTYwdDFYOXY3UGxQL0d5cC95M0RxeHNvdVpGU0FDcm9vdWlrVmtMeStNNmM1TXVEYVpiCmh5dUNKVTV1Wm5Kd0tMK3RKWHhtdkpubUQ4ZDdONS80OW5GVlA4MzVnemR2cXVBcEJMT2VVaFZtSEJZb0NldngKUEtrQWFCbnY5WmgwYUhwQldGRDhDLzhsVHM5UlQvbFEydGdVQktzaWExTEdwOGQ5UGljcjJWMmFGUXc5azlCSQpxbCtFV2JIN0dqV3JnUDBDZ2dFQkFNaDlVbkJOYXd1Q3IxV2pwMHM2dzVFdEJhV2hURXVXWEZtZkpnV0JIVkcxCkY0U0JFM044VmtLdjFoVXFRNTcvbFgzZHhVN25CakpubkVCUFRTbTJvSXZaM081ZSs4dFZkWlRtaVV2UTR4Wi8KNWJrZzJEWDA2STc3YTVrK2d1ZzlSd1hxQkFXSURkVFdTVFhMQ1o5RVdIeDZxSHhaNVUxNi9WTkVwNS9MVjNyMApSandhYktiWVhkOU8zdlR5Y2xYamo1SXh1TjJSWlY4ejg0bzR5L1RaVm5ORnRSYXBtSVlVSUdjdzlZR1lnWFZhCndjZXdLZ0FpbUhtMEVOU1NIMHArSnRyT0E4QVA4UjFvays1NU95TmZzSVhtZmZBQW1QRTZvMUUxY28vdGFjZXMKa3dzZHVScDhIRUNXNHRTZTJ3aVJtZ2VHeFUySUM3aXZJNUlMTkZrMEFxVUNnZ0VCQUlnQ1NYLzNyY2RnRzN2TApSOVJESVpWVEw0NkttQ2VMVHltQ3grc3NCSER3RStMUXl0K3UyT3NvbWRVU0ZDV3VrYVZoQmlUR1ZFYXpYbkcxCmNZVmcvU0VkNVNtWFBWSlAxZXR3STU1ampweEc4TVNLY3EyMlBpdWlqNXhhdDF2REgzb1BwVktSRmNFaW11SngKZnNWQlZueU1nZHd0ZGpTUTliU08vWXpkSkFVNXcxYzZ4c29JL3ZkcVRDOGpsQzlGU1lhVHB1NTJHZU5BQ0UzUwo4cjFldG43eHcvKyszZllOSERVNUlIdllWc0E4MFJURDhHU1pud1RtSDBlV1RUeS85V0N3QzRsdTRXbDNYcUZLCjl3YVR3RktwOFAyUkM2amlTeThMczlQeE9aQm82NG9OOVZNR3BrK0FKNVY0dFIrMWc1V0hMOXlIRVAycFFOMUEKd3dtOG9va0NnZ0VBTzZ0WXlzV3YwemdzMk04aExqbXFGTjRTYlM0cFYrSERVSVVXT3RNbmw3Yk83Z2ZBYzBHUgpKcjNRZUhJZ3VBU1hTR09sb29zTmhCamtIeHU2K213NU1nWkFRODJQSVFBcFE0eXRWaHd3U2ZUOHVQRjJoL0NBCituVUhuQTlIeExqZ0YzbURndVh3UCtVYTJ1QzMxMmZ1OGZWTGlkN3phUER1emthRG9RSlM0ZXdycngycU1xbjQKbmtxSi90cmRmb1NBcVdFVkJSU04yQnpOSWRrdmtvclF1UFFKSmxxSlkzWkFBcFpHcXpCcGJ6VDRzV2JUeVVDQwpvczRkcURacEM3R3AvTHNOMEs2dDh6TzV1MkxuWCtyTnpieEF4UnBZYW9zcUtqUS9DV2orYjRnRUoyM01ObjZ6CnBlR0NWd2VFWnZOMnBVRE9IZm9jaXZYTkgxMG9VbGd4WlFLQ0FRQjBmRlBNU3FZU0l0OThORFhNNTkwSmVlSGMKNXM1Y2hjTDd3MWtIUXVCcmc4anUzMkY3TlZqeGxpK21DQW4yYU0yME45Nk9jNjBURGZITjVpaHNTelpkQVlxZwptdmZsUnhoUjcraGQ5OEIrQjhOaW5SMk85KzRvWVpYVVFSUlNTZEI1V254aE0zcXVHZEQ5ZnUwV0xENnRLdm9ECnp0QVJkcHBKMDBkWWI5N3JKZllOaTNEdVYrOUVROVFwaTJaNzJ4cTM3Y2ovSGRsQVlZVzA2bW1mNVE0UmF3cWEKdE95RGVqTm9DYTVKbkg4M0ovR1hhbkFUeDV2NXdkSlFZQ3JqQVVNL1V2eW9EZklsbU9KZXpsV0NyS2hjdG5jZQpMRUFsemFJYTI0S2hzK2JLdnhreTNNYzU3TUw0enVqRXRDalZRbHdwMUZXbXVnWFh3TGFsYVk0VGdsejkKLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
---
apiVersion: v1
kind: Service
metadata:
  name: fwd-berichtenlegacy-svc
  namespace: acceptatie
spec:
  type: ExternalName
  externalName: berichten-legacy.dci.aah.acc
